
@import "compass/css3/animation";

/**
 * CSS3 Keyframes cross browser
 * @param $name: keyframe name
 */
@mixin keyframes($name) {
  @include keyframes($name){
    @content;
  }
}

/**
 * CSS3 Animation cross browser
 * @param $name: animation name
 * @param $duration: animation duration (s, ms)
 * @param $timing-function: animation timing function (default: ease)
 * @param $iteration-count: animation iteration count (default: inifinite)
 * @param $direction: animation direction (default: notmal)
 * @param $fill-mode: animation fill mode (default: forwards)
 * @param $play-state: animation play stage (default: running)
 */
@mixin animation($name, $duration: 1s, $timing-function: ease, $delay: 0s, $iteration-count: infinite, $direction: normal, $fill-mode: forwards, $play-state: running) {
  animation-name: #{$name};
  animation-duration: #{$duration};
  animation-iteration-count: #{$iteration-count};
  animation-direction: #{$direction};
  animation-timing-function: #{$timing-function};
  animation-fill-mode: #{$fill-mode};
  animation-delay: #{$delay};
}

/**
 * Mixin used to manage device and boxes
 */
@mixin flipIn($deg0, $deg100){
  animation: 0.6s flipIn ease;

  @keyframes flipIn {
    0% {
      transform: rotateX($deg0);
      transform-origin: 0 100%;
      opacity: 1;
    }

    100% {
      opacity: 0;
      transform: rotateX($deg100);
      transform-origin: 0 0;
    }
  }
}

@mixin flipOut($deg0, $deg100) {
  animation:0.6s flipOut ease;

  @keyframes flipOut {
    0% {
      opacity: 0;
      transform: rotateX($deg0);
      transform-origin: 0 0;
    }

    100% {
      transform: rotateX($deg100);
      transform-origin: 0 100%;
      opacity: 1;
    }
  }
}

// Mixin to manage progress bar
@mixin progress($step) {
  $barColor: tomato;
  $backColor: #2f3439;

  $loops: round(100 / $step);
  $increment: 360 / $loops;
  $half: round($loops / 2);
  @for $i from 0 through $loops {
    .progress-#{$i*$step} {
      @if $i < $half {
        $nextdeg: 90deg + ( $increment * $i );
        background-image: linear-gradient(90deg, $light-green 50%, transparent 50%, transparent), linear-gradient($nextdeg, $green 50%, $light-green 50%, $light-green 50%);
      } @else {
        @if $i*$step <= 75 {
          $nextdeg: -90deg + ( $increment * ( $i - $half ) );
          background-image: linear-gradient($nextdeg, $orange 50%, transparent 50%, transparent), linear-gradient(270deg, $orange 50%, $light-orange 50%, $light-orange);
        } @else {
          $nextdeg: -90deg + ( $increment * ( $i - $half ) );
          background-image: linear-gradient($nextdeg, $red 50%, transparent 50%, transparent), linear-gradient(270deg, $red 50%, $light-red 50%, $light-red);
        }
      }
    }
  }
}
